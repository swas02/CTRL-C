<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StackOverflow (Copy Code)</title>
    <script src="./copyDivToClipboard.js"></script>
</head>

<body>
    <script>
        if (document.querySelectorAll('.s-code-block').length) {
            //Changing all code border to green
            var css = '.s-code-block { border: 1.5px solid green; }',
                head = document.head || document.getElementsByTagName('head')[0],
                style = document.createElement('style');

            head.appendChild(style);
            style.type = 'text/css';
            if (style.styleSheet) {
                // This is required for IE8 and below.
                style.styleSheet.cssText = css;
            } else {
                style.appendChild(document.createTextNode(css));
            }


            //Getting all code blocks
            document.querySelectorAll('.s-code-block').forEach(e => {
                e.setAttribute("onclick", "copyDivToClipboard(this)");
            })


            //Creating Status div
            if (document.querySelectorAll('#copyStatus').length == 0) {
                var div = document.createElement("div");
                div.id = 'copyStatus';
                div.style.width = "200px";
                div.style.background = "rgba(0,255,0,0.5)";
                div.style.color = "black";
                div.innerHTML = "Click on the code to copy!";
                div.style.position = "fixed";
                div.style.bottom = '0';
                div.style.right = '0';
                div.style.zIndex = '9999';
                div.style.fontSize = '15px';
                div.style.textAlign = 'center';
                div.style.padding = '2px';
                div.style.backdropFilter = 'blur(10px)'
                document.body.appendChild(div);
            }
            console.log('setup done!')
        } else {
            console.log('Website not compatible!')
        }
    </script>
</body>

</html>