<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StackOverflow (Copy Code)</title>
    <script src="./copyDivToClipboard.js"></script>
</head>

<body>
    <p> Run this bookmarklet by bookmarking this link:
        <a class="bookmarklet"
            href="javascript:(function()%7Bfunction%20callback()%7Bif(document.querySelectorAll(%22pre%22).length)%7Bvar%20c%3D%22pre%20%7B%20border%3A%201.5px%20solid%20green%3B%20%7D%22%2Cd%3Ddocument.head%7C%7Cdocument.getElementsByTagName(%22head%22)%5B0%5D%2Cb%3Ddocument.createElement(%22style%22)%3Bif(d.appendChild(b)%2Cb.type%3D%22text%2Fcss%22%2Cb.styleSheet%3Fb.styleSheet.cssText%3Dc%3Ab.appendChild(document.createTextNode(c))%2Cdocument.querySelectorAll(%22pre%22).forEach(a%3D%3E%7Ba.setAttribute(%22onclick%22%2C%22copyDivToClipboard(this)%22)%7D)%2C0%3D%3Ddocument.querySelectorAll(%22%23copyStatus%22).length)%7Bvar%20a%3Ddocument.createElement(%22div%22)%3Ba.id%3D%22copyStatus%22%2Ca.style.width%3D%22200px%22%2Ca.style.background%3D%22rgba(0%2C255%2C0%2C0.5)%22%2Ca.style.color%3D%22black%22%2Ca.innerHTML%3D%22Click%20on%20the%20code%20to%20copy!%22%2Ca.style.position%3D%22fixed%22%2Ca.style.bottom%3D%220%22%2Ca.style.right%3D%220%22%2Ca.style.zIndex%3D%229999%22%2Ca.style.fontSize%3D%2215px%22%2Ca.style.textAlign%3D%22center%22%2Ca.style.padding%3D%222px%22%2Ca.style.backdropFilter%3D%22blur(10px)%22%2Cdocument.body.appendChild(a)%7Dconsole.log(%22setup%20done!%22)%7Delse%20console.log(%22Website%20not%20compatible!%22)%7Dvar%20s%3Ddocument.createElement(%22script%22)%3Bs.src%3D%22https%3A%2F%2Fswas02.github.io%2FStackExchange-Copy-Button%2FcopyDivToClipboard.js%22%3Bif(s.addEventListener)%7Bs.addEventListener(%22load%22%2Ccallback%2Cfalse)%7Delse%20if(s.readyState)%7Bs.onreadystatechange%3Dcallback%7Ddocument.body.appendChild(s)%3B%7D)()">StackExchange
            (Copy Button)</a></p>
    <script>
        if (document.querySelectorAll('pre').length) {
            //Changing all code border to green
            var css = 'pre { border: 1.5px solid green; }',
                head = document.head || document.getElementsByTagName('head')[0],
                style = document.createElement('style');

            head.appendChild(style);
            style.type = 'text/css';
            if (style.styleSheet) {
                // This is required for IE8 and below.
                style.styleSheet.cssText = css;
            } else {
                style.appendChild(document.createTextNode(css));
            }


            //Getting all code blocks
            document.querySelectorAll('pre').forEach(e => {
                e.setAttribute("onclick", "copyDivToClipboard(this)");
            })


            //Creating Status div
            if (document.querySelectorAll('#copyStatus').length == 0) {
                var div = document.createElement("div");
                div.id = 'copyStatus';
                div.style.width = "200px";
                div.style.background = "rgba(0,255,0,0.5)";
                div.style.color = "black";
                div.innerHTML = "Click on the code to copy!";
                div.style.position = "fixed";
                div.style.bottom = '0';
                div.style.right = '0';
                div.style.zIndex = '9999';
                div.style.fontSize = '15px';
                div.style.textAlign = 'center';
                div.style.padding = '2px';
                div.style.backdropFilter = 'blur(10px)'
                document.body.appendChild(div);
            }
            console.log('setup done!')
        } else {
            console.log('Website not compatible!')
        }
    </script>
</body>

</html>
